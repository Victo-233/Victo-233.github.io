"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[927],{927:function(e,t,n){n.r(t),n.d(t,{default:function(){return bgm_player}});var r=n(5893),l=n(7294),i=n(5161),a=n(7747),o=n(9993),dataAttr=e=>e?"":void 0,ariaAttr=e=>!!e||void 0,cx=(...e)=>e.filter(Boolean).join(" ");function callAllHandlers(...e){return function(t){e.some(e=>(null==e||e(t),null==t?void 0:t.defaultPrevented))}}function orient(e){let{orientation:t,vertical:n,horizontal:r}=e;return"vertical"===t?n:r}var s={width:0,height:0},normalize=e=>e||s;function isTouchEvent(e){let t=!!e.touches;return t}function getEventPoint(e,t="page"){return isTouchEvent(e)?function(e,t="page"){let n=e.touches[0]||e.changedTouches[0];return{x:n[`${t}X`],y:n[`${t}Y`]}}(e,t):function(e,t="page"){return{x:e[`${t}X`],y:e[`${t}Y`]}}(e,t)}function addPointerEvent(e,t,n,r){var l;return l=function(e,t=!1){function listener(t){e(t,{point:getEventPoint(t)})}let n=t?e=>{let t=function(e){var t;let n=null!=(t=e.view)?t:window;return void 0!==n.PointerEvent&&e instanceof n.PointerEvent?!("mouse"!==e.pointerType):e instanceof n.MouseEvent}(e);(!t||t&&0===e.button)&&listener(e)}:listener;return n}(n,"pointerdown"===t),e.addEventListener(t,l,r),()=>{e.removeEventListener(t,l,r)}}let u=1/60*1e3,c="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),d="undefined"!=typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout(()=>e(c()),u),h=!0,p=!1,f=!1,v={delta:0,timestamp:0},m=["read","update","preRender","render","postRender"],b=m.reduce((e,t)=>(e[t]=function(e){let t=[],n=[],r=0,l=!1,i=!1,a=new WeakSet,o={schedule:(e,i=!1,o=!1)=>{let s=o&&l,u=s?t:n;return i&&a.add(e),-1===u.indexOf(e)&&(u.push(e),s&&l&&(r=t.length)),e},cancel:e=>{let t=n.indexOf(e);-1!==t&&n.splice(t,1),a.delete(e)},process:s=>{if(l){i=!0;return}if(l=!0,[t,n]=[n,t],n.length=0,r=t.length)for(let n=0;n<r;n++){let r=t[n];r(s),a.has(r)&&(o.schedule(r),e())}l=!1,i&&(i=!1,o.process(s))}};return o}(()=>p=!0),e),{}),y=m.reduce((e,t)=>{let n=b[t];return e[t]=(e,t=!1,r=!1)=>(p||startLoop(),n.schedule(e,t,r)),e},{}),g=m.reduce((e,t)=>(e[t]=b[t].cancel,e),{});m.reduce((e,t)=>(e[t]=()=>b[t].process(v),e),{});let processStep=e=>b[e].process(v),processFrame=e=>{p=!1,v.delta=h?u:Math.max(Math.min(e-v.timestamp,40),1),v.timestamp=e,f=!0,m.forEach(processStep),f=!1,p&&(h=!1,d(processFrame))},startLoop=()=>{p=!0,h=!0,f||d(processFrame)},getFrameData=()=>v;var x=Object.defineProperty,__defNormalProp=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,n),n),w=class{constructor(e,t,n){var r;if(__publicField(this,"history",[]),__publicField(this,"startEvent",null),__publicField(this,"lastEvent",null),__publicField(this,"lastEventInfo",null),__publicField(this,"handlers",{}),__publicField(this,"removeListeners",()=>{}),__publicField(this,"threshold",3),__publicField(this,"win"),__publicField(this,"updatePoint",()=>{if(!(this.lastEvent&&this.lastEventInfo))return;let e=getPanInfo(this.lastEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){if("number"==typeof e&&"number"==typeof t)return distance1D(e,t);if(isPoint(e)&&isPoint(t)){let n=distance1D(e.x,t.x),r=distance1D(e.y,t.y);return Math.sqrt(n**2+r**2)}return 0}(e.offset,{x:0,y:0})>=this.threshold;if(!t&&!n)return;let{timestamp:r}=getFrameData();this.history.push({...e.point,timestamp:r});let{onStart:l,onMove:i}=this.handlers;t||(null==l||l(this.lastEvent,e),this.startEvent=this.lastEvent),null==i||i(this.lastEvent,e)}),__publicField(this,"onPointerMove",(e,t)=>{this.lastEvent=e,this.lastEventInfo=t,y.update(this.updatePoint,!0)}),__publicField(this,"onPointerUp",(e,t)=>{let n=getPanInfo(t,this.history),{onEnd:r,onSessionEnd:l}=this.handlers;null==l||l(e,n),this.end(),r&&this.startEvent&&(null==r||r(e,n))}),this.win=null!=(r=e.view)?r:window,isTouchEvent(e)&&e.touches.length>1)return;this.handlers=t,n&&(this.threshold=n),e.stopPropagation(),e.preventDefault();let l={point:getEventPoint(e)},{timestamp:i}=getFrameData();this.history=[{...l.point,timestamp:i}];let{onSessionStart:a}=t;null==a||a(e,getPanInfo(l,this.history)),this.removeListeners=function(...e){return t=>e.reduce((e,t)=>t(e),t)}(addPointerEvent(this.win,"pointermove",this.onPointerMove),addPointerEvent(this.win,"pointerup",this.onPointerUp),addPointerEvent(this.win,"pointercancel",this.onPointerUp))}updateHandlers(e){this.handlers=e}end(){var e;null==(e=this.removeListeners)||e.call(this),g.update(this.updatePoint)}};function subtract(e,t){return{x:e.x-t.x,y:e.y-t.y}}function getPanInfo(e,t){return{point:e.point,delta:subtract(e.point,t[t.length-1]),offset:subtract(e.point,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null,l=e[e.length-1];for(;n>=0&&(r=e[n],!(l.timestamp-r.timestamp>toMilliseconds(.1)));)n--;if(!r)return{x:0,y:0};let i=(l.timestamp-r.timestamp)/1e3;if(0===i)return{x:0,y:0};let a={x:(l.x-r.x)/i,y:(l.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,0)}}var toMilliseconds=e=>1e3*e;function distance1D(e,t){return Math.abs(e-t)}function isPoint(e){return"x"in e&&"y"in e}function useLatestRef(e){let t=(0,l.useRef)(null);return t.current=e,t}var _=n(5155),E=n(2366),S=(null==globalThis?void 0:globalThis.document)?l.useLayoutEffect:l.useEffect,k=n(1103);function roundValueToStep(e,t,n){let r=Math.round((e-t)/n)*n+t,l=function(e){if(!Number.isFinite(e))return 0;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n+=1;return n}(n);return function(e,t){let n=function(e){let t=parseFloat(e);return"number"!=typeof t||Number.isNaN(t)?0:t}(e),r=10**(null!=t?t:10);return n=Math.round(n*r)/r,t?n.toFixed(t):n.toString()}(r,l)}function clampValue(e,t,n){return null==e?e:(n<t&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(e,t),n))}var P=n(5227),A=n(6554),F=n(7030),N=n(3179),C=n(8940),M=n(5548),[L,T]=(0,P.k)({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[j,z]=(0,P.k)({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),I=(0,A.G)((e,t)=>{var n;let i={...e,orientation:null!=(n=null==e?void 0:e.orientation)?n:"horizontal"},a=(0,F.jC)("Slider",i),o=(0,N.Lr)(i),{direction:u}=(0,C.F)();o.direction=u;let{getInputProps:c,getRootProps:d,...h}=function(e){var t;let{min:n=0,max:r=100,onChange:i,value:a,defaultValue:o,isReversed:u,direction:c="ltr",orientation:d="horizontal",id:h,isDisabled:p,isReadOnly:f,onChangeStart:v,onChangeEnd:m,step:b=1,getAriaValueText:y,"aria-valuetext":g,"aria-label":x,"aria-labelledby":P,name:A,focusThumbOnChange:F=!0,...N}=e,C=(0,_.W)(v),M=(0,_.W)(m),L=(0,_.W)(y),T=function(e){let{isReversed:t,direction:n,orientation:r}=e;return"ltr"===n||"vertical"===r?t:!t}({isReversed:u,direction:c,orientation:d}),[j,z]=function(e){let{value:t,defaultValue:n,onChange:r,shouldUpdate:i=(e,t)=>e!==t}=e,a=(0,_.W)(r),o=(0,_.W)(i),[s,u]=(0,l.useState)(n),c=void 0!==t,d=c?t:s,h=(0,_.W)(e=>{let t="function"==typeof e?e(d):e;o(d,t)&&(c||u(t),a(t))},[c,a,d,o]);return[d,h]}({value:a,defaultValue:null!=o?o:r<n?n:n+(r-n)/2,onChange:i}),[I,$]=(0,l.useState)(!1),[D,R]=(0,l.useState)(!1),U=!(p||f),V=(r-n)/10,W=b||(r-n)/100,B=clampValue(j,n,r),H=r-B+n,G=T?H:B,O=(G-n)*100/(r-n),q="vertical"===d,X=useLatestRef({min:n,max:r,step:b,isDisabled:p,value:B,isInteractive:U,isReversed:T,isVertical:q,eventSource:null,focusThumbOnChange:F,orientation:d}),Y=(0,l.useRef)(null),K=(0,l.useRef)(null),J=(0,l.useRef)(null),Q=(0,l.useId)(),Z=null!=h?h:Q,[ee,et]=[`slider-thumb-${Z}`,`slider-track-${Z}`],en=(0,l.useCallback)(e=>{var t,n,r,l;if(!Y.current)return;let i=X.current;i.eventSource="pointer";let a=Y.current.getBoundingClientRect(),{clientX:o,clientY:s}=null!=(n=null==(t=e.touches)?void 0:t[0])?n:e,u=q?a.bottom-s:o-a.left,c=q?a.height:a.width,d=u/c;T&&(d=1-d);let h=(r=d,l=i.min,(i.max-l)*r+l);return i.step&&(h=parseFloat(roundValueToStep(h,i.min,i.step))),h=clampValue(h,i.min,i.max)},[q,T,X]),er=(0,l.useCallback)(e=>{let t=X.current;t.isInteractive&&z(e=clampValue(e=parseFloat(roundValueToStep(e,t.min,W)),t.min,t.max))},[W,z,X]),el=(0,l.useMemo)(()=>({stepUp(e=W){let t=T?B-e:B+e;er(t)},stepDown(e=W){let t=T?B+e:B-e;er(t)},reset(){er(o||0)},stepTo(e){er(e)}}),[er,T,B,W,o]),ei=(0,l.useCallback)(e=>{let t=X.current,n={ArrowRight:()=>el.stepUp(),ArrowUp:()=>el.stepUp(),ArrowLeft:()=>el.stepDown(),ArrowDown:()=>el.stepDown(),PageUp:()=>el.stepUp(V),PageDown:()=>el.stepDown(V),Home:()=>er(t.min),End:()=>er(t.max)}[e.key];n&&(e.preventDefault(),e.stopPropagation(),n(e),t.eventSource="keyboard")},[el,er,V,X]),ea=null!=(t=null==L?void 0:L(B))?t:g,eo=function(e){let[t]=function({getNodes:e,observeMutation:t=!0}){let[n,r]=(0,l.useState)([]),[i,a]=(0,l.useState)(0);return S(()=>{let n=e(),l=n.map((e,t)=>(function(e,t){if(!e){t(void 0);return}t({width:e.offsetWidth,height:e.offsetHeight});let n=e.ownerDocument.defaultView??window,r=new n.ResizeObserver(n=>{let r,l;if(!Array.isArray(n)||!n.length)return;let[i]=n;if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,l=t.blockSize}else r=e.offsetWidth,l=e.offsetHeight;t({width:r,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)})(e,e=>{r(n=>[...n.slice(0,t),e,...n.slice(t+1)])}));if(t){let e=n[0];l.push(function(e,t){var n,r;if(!e||!e.parentElement)return;let l=null!=(r=null==(n=e.ownerDocument)?void 0:n.defaultView)?r:window,i=new l.MutationObserver(()=>{t()});return i.observe(e.parentElement,{childList:!0}),()=>{i.disconnect()}}(e,()=>{a(e=>e+1)}))}return()=>{l.forEach(e=>{null==e||e()})}},[i]),n}({observeMutation:!1,getNodes(){let t="object"==typeof e&&null!==e&&"current"in e?e.current:e;return[t]}});return t}(K),{getThumbStyle:es,rootStyle:eu,trackStyle:ec,innerTrackStyle:ed}=(0,l.useMemo)(()=>{let e=X.current,t=null!=eo?eo:{width:0,height:0};return function(e){let{orientation:t,thumbPercents:n,thumbRects:r,isReversed:l}=e,i="vertical"===t?r.reduce((e,t)=>normalize(e).height>normalize(t).height?e:t,s):r.reduce((e,t)=>normalize(e).width>normalize(t).width?e:t,s),a={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0,...orient({orientation:t,vertical:i?{paddingLeft:i.width/2,paddingRight:i.width/2}:{},horizontal:i?{paddingTop:i.height/2,paddingBottom:i.height/2}:{}})},o={position:"absolute",...orient({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},u=1===n.length,c=[0,l?100-n[0]:n[0]],d=u?c:n,h=d[0];!u&&l&&(h=100-h);let p=Math.abs(d[d.length-1]-d[0]),f={...o,...orient({orientation:t,vertical:l?{height:`${p}%`,top:`${h}%`}:{height:`${p}%`,bottom:`${h}%`},horizontal:l?{width:`${p}%`,right:`${h}%`}:{width:`${p}%`,left:`${h}%`}})};return{trackStyle:o,innerTrackStyle:f,rootStyle:a,getThumbStyle:e=>{var l;let i=null!=(l=r[e])?l:s;return{position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...orient({orientation:t,vertical:{bottom:`calc(${n[e]}% - ${i.height/2}px)`},horizontal:{left:`calc(${n[e]}% - ${i.width/2}px)`}})}}}}({isReversed:T,orientation:e.orientation,thumbRects:[t],thumbPercents:[O]})},[T,eo,O,X]),eh=(0,l.useCallback)(()=>{let e=X.current;e.focusThumbOnChange&&setTimeout(()=>{var e;return null==(e=K.current)?void 0:e.focus()})},[X]);function setValueFromPointer(e){let t=en(e);null!=t&&t!==X.current.value&&z(t)}(0,E.r)(()=>{let e=X.current;eh(),"keyboard"===e.eventSource&&(null==M||M(e.value))},[B,M]),function(e,t){let{onPan:n,onPanStart:r,onPanEnd:i,onPanSessionStart:a,onPanSessionEnd:o,threshold:s}=t,u=!!(n||r||i||a||o),c=(0,l.useRef)(null),d=useLatestRef({onSessionStart:a,onSessionEnd:o,onStart:r,onMove:n,onEnd(e,t){c.current=null,null==i||i(e,t)}});(0,l.useEffect)(()=>{var e;null==(e=c.current)||e.updateHandlers(d.current)}),(0,l.useEffect)(()=>{let t=e.current;if(t&&u)return addPointerEvent(t,"pointerdown",function(e){c.current=new w(e,d.current,s)})},[e,u,d,s]),(0,l.useEffect)(()=>()=>{var e;null==(e=c.current)||e.end(),c.current=null},[])}(J,{onPanSessionStart(e){let t=X.current;t.isInteractive&&($(!0),eh(),setValueFromPointer(e),null==C||C(t.value))},onPanSessionEnd(){let e=X.current;e.isInteractive&&($(!1),null==M||M(e.value))},onPan(e){let t=X.current;t.isInteractive&&setValueFromPointer(e)}});let ep=(0,l.useCallback)((e={},t=null)=>({...e,...N,ref:(0,k.lq)(t,J),tabIndex:-1,"aria-disabled":ariaAttr(p),"data-focused":dataAttr(D),style:{...e.style,...eu}}),[N,p,D,eu]),ef=(0,l.useCallback)((e={},t=null)=>({...e,ref:(0,k.lq)(t,Y),id:et,"data-disabled":dataAttr(p),style:{...e.style,...ec}}),[p,et,ec]),ev=(0,l.useCallback)((e={},t=null)=>({...e,ref:t,style:{...e.style,...ed}}),[ed]),em=(0,l.useCallback)((e={},t=null)=>({...e,ref:(0,k.lq)(t,K),role:"slider",tabIndex:U?0:void 0,id:ee,"data-active":dataAttr(I),"aria-valuetext":ea,"aria-valuemin":n,"aria-valuemax":r,"aria-valuenow":B,"aria-orientation":d,"aria-disabled":ariaAttr(p),"aria-readonly":ariaAttr(f),"aria-label":x,"aria-labelledby":x?void 0:P,style:{...e.style,...es(0)},onKeyDown:callAllHandlers(e.onKeyDown,ei),onFocus:callAllHandlers(e.onFocus,()=>R(!0)),onBlur:callAllHandlers(e.onBlur,()=>R(!1))}),[U,ee,I,ea,n,r,B,d,p,f,x,P,es,ei]),eb=(0,l.useCallback)((e,t=null)=>{let l=!(e.value<n||e.value>r),i=B>=e.value,a=(e.value-n)*100/(r-n),o={position:"absolute",pointerEvents:"none",...function(e){let{orientation:t,vertical:n,horizontal:r}=e;return"vertical"===t?n:r}({orientation:d,vertical:{bottom:T?`${100-a}%`:`${a}%`},horizontal:{left:T?`${100-a}%`:`${a}%`}})};return{...e,ref:t,role:"presentation","aria-hidden":!0,"data-disabled":dataAttr(p),"data-invalid":dataAttr(!l),"data-highlighted":dataAttr(i),style:{...e.style,...o}}},[p,T,r,n,d,B]),ey=(0,l.useCallback)((e={},t=null)=>({...e,ref:t,type:"hidden",value:B,name:A}),[A,B]);return{state:{value:B,isFocused:D,isDragging:I},actions:el,getRootProps:ep,getTrackProps:ef,getInnerTrackProps:ev,getThumbProps:em,getMarkerProps:eb,getInputProps:ey}}(o),p=d(),f=c({},t);return(0,r.jsx)(L,{value:h,children:(0,r.jsx)(j,{value:a,children:(0,r.jsxs)(M.m.div,{...p,className:cx("chakra-slider",i.className),__css:a.container,children:[i.children,(0,r.jsx)("input",{...f})]})})})});I.displayName="Slider";var $=(0,A.G)((e,t)=>{let{getThumbProps:n}=T(),l=z(),i=n(e,t);return(0,r.jsx)(M.m.div,{...i,className:cx("chakra-slider__thumb",e.className),__css:l.thumb})});$.displayName="SliderThumb";var D=(0,A.G)((e,t)=>{let{getTrackProps:n}=T(),l=z(),i=n(e,t);return(0,r.jsx)(M.m.div,{...i,className:cx("chakra-slider__track",e.className),__css:l.track})});D.displayName="SliderTrack";var R=(0,A.G)((e,t)=>{let{getInnerTrackProps:n}=T(),l=z(),i=n(e,t);return(0,r.jsx)(M.m.div,{...i,className:cx("chakra-slider__filled-track",e.className),__css:l.filledTrack})});R.displayName="SliderFilledTrack",(0,A.G)((e,t)=>{let{getMarkerProps:n}=T(),l=z(),i=n(e,t);return(0,r.jsx)(M.m.div,{...i,className:cx("chakra-slider__marker",e.className),__css:l.mark})}).displayName="SliderMark";var U=n(4027),V=(0,U.I)({d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z",displayName:"TriangleUpIcon"}),W=(0,U.I)({displayName:"SmallCloseIcon",viewBox:"0 0 16 16",path:(0,r.jsx)("path",{d:"M9.41 8l2.29-2.29c.19-.18.3-.43.3-.71a1.003 1.003 0 0 0-1.71-.71L8 6.59l-2.29-2.3a1.003 1.003 0 0 0-1.42 1.42L6.59 8 4.3 10.29c-.19.18-.3.43-.3.71a1.003 1.003 0 0 0 1.71.71L8 9.41l2.29 2.29c.18.19.43.3.71.3a1.003 1.003 0 0 0 .71-1.71L9.41 8z",fillRule:"evenodd",fill:"currentColor"})}),B=n(3454),bgm_player=()=>{let e=(0,l.useRef)(null),[t,n]=(0,l.useState)(.4),[s,u]=(0,l.useState)(!1),c=(0,i.ff)("whiteAlpha.800","blackAlpha.600"),d=(0,i.ff)("blackAlpha.200","whiteAlpha.300"),h=B.env.NEXT_PUBLIC_BGM_URL||"/card.png";return(0,l.useEffect)(()=>{let n=e.current;n&&(n.volume=t)},[t]),(0,l.useEffect)(()=>{let t=e.current;t&&(t.muted=s)},[s]),(0,l.useEffect)(()=>{let t=e.current;if(!t)return;let tryPlay=()=>{t.play().catch(()=>{})};return tryPlay(),document.addEventListener("click",tryPlay,{once:!0}),()=>{document.removeEventListener("click",tryPlay)}},[]),(0,r.jsxs)(a.xu,{position:"fixed",right:3,bottom:3,zIndex:3,bg:c,borderWidth:"1px",borderColor:d,rounded:"md",px:3,py:2,boxShadow:"md",display:"flex",alignItems:"center",gap:2,children:[(0,r.jsx)("audio",{ref:e,src:h,loop:!0,preload:"none"}),(0,r.jsx)(o.h,{"aria-label":s?"取消静音":"静音",icon:s?(0,r.jsx)(V,{}):(0,r.jsx)(W,{}),size:"sm",onClick:()=>u(e=>!e)}),(0,r.jsxs)(I,{"aria-label":"音量",value:Math.round(100*t),onChange:e=>n(e/100),width:"120px",children:[(0,r.jsx)(D,{children:(0,r.jsx)(R,{})}),(0,r.jsx)($,{})]})]})}}}]);